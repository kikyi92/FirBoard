<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<!-- <mapper namespace="com.xiness.mappers.BoardMapper">
  mybatis-config.xml의 typeAlias에 등록해두지 않았다면 
        <select id="selectMember" resultType="com.example.dto.MemberVO" >
            SELECT ID, PW ,NAME FROM TEST
        </select>
        이렇게 해야 한다. 
    
    <select id="selectBoard" resultType="BoardVO">
        SELECT no, title, content, writer, datetime, option, pubpriv FROM boardtable
    </select>
    
</mapper> -->

<mapper namespace="com.xiness.mapper.BoardMapper">
   
    <select id="selectBoard" resultType="BoardVO"> 
        SELECT * FROM boardtable 
        ORDER BY groupno DESC, depth ASC;
    </select>
    
    <insert id="insertBoard" parameterType="BoardVO">
    	INSERT INTO boardtable(datetime, cate, source, writer, title, content, pubpriv, groupno, indent, depth)
    	VALUES (#{datetime}, #{cate}, #{source}, #{writer}, #{title}, #{content}, #{pubpriv}, #{broupno}, 1, 0)
    	<selectKey keyProperty="groupno" resultType="int" order="AFTER">
    		select max(no)+1 from boardtable
 	 	</selectKey>
    </insert>
    
</mapper>


